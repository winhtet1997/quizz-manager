<!DOCTYPE html>
<html lang="en">
<head>
  {% load static %}
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Quiz Manager{% endblock %}</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="manifest" href="{% static 'manifest.json' %}">
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen">
  <header class="bg-white shadow p-4 mb-6">
    <div class="container mx-auto flex justify-between items-center">
      <a href="{% url 'quizzes:list' %}" class="text-xl font-semibold">Quiz Manager</a>
      <nav>
        <a class="mr-4" href="{% url 'quizzes:list' %}">Quizzes</a>
        {% if user.is_authenticated %}
          <a class="mr-4" href="{% url 'quizzes:history' %}">My History</a>
          <a href="/admin/">Admin</a>
        {% else %}
          <a href="/admin/login/?next=/admin/">Admin login</a>
        {% endif %}
      </nav>
    </div>
  </header>

  <main class="container mx-auto px-4">
    {% if messages %}<div class="mb-4">
      {% for m in messages %}
        <div class="p-3 rounded mb-2 bg-green-50 border border-green-100">{{ m }}</div>
      {% endfor %}
    </div>{% endif %}
    {% block content %}{% endblock %}
  </main>

  <!-- register service worker -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register("{% static 'serviceworker.js' %}")
        .then(() => console.log('service worker registered'))
        .catch(err => console.log('sw error', err));
    }
  </script>
</body>
</html>
